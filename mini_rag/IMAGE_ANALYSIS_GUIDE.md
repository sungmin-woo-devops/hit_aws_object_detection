# 🖼️ AWS 다이어그램 이미지 해석 가이드

이 가이드는 mini_rag 시스템의 이미지 해석 기능을 사용하는 방법을 설명합니다.

## 📋 기능 개요

이미지 해석 기능은 AWS 아키텍처 다이어그램을 분석하여 구조화된 정보를 추출하고 상세한 해설을 제공합니다.

### 주요 기능
- **OCR 텍스트 추출**: 이미지에서 텍스트 자동 인식
- **아이콘 인식**: AWS 서비스 아이콘 자동 탐지
- **구조화 분석**: JSON 형태로 정리된 아키텍처 정보
- **상세 해설**: LLM 기반 자연어 해설

## 🚀 사용 방법

### 1. 이미지 업로드
- AWS 아키텍처 다이어그램 이미지를 업로드합니다
- 지원 형식: PNG, JPG, JPEG, GIF
- 권장 해상도: 800x600 이상

### 2. OCR 보강 설정
- **체크**: 이미지에서 텍스트를 자동으로 추출합니다
- **해제**: 텍스트 추출 없이 아이콘만 분석합니다

### 3. 아이콘 탐지 JSON (선택사항)
AWS 서비스 아이콘과 연결 관계를 JSON 형태로 입력할 수 있습니다.

#### 기본 형식
```json
{
  "icons": [
    {
      "type": "aws_service",
      "name": "Amazon S3",
      "confidence": 0.95,
      "bbox": [100, 150, 200, 250],
      "description": "Simple Storage Service - 객체 저장소"
    }
  ],
  "connections": [
    {
      "from": "Amazon S3",
      "to": "AWS Lambda",
      "type": "trigger",
      "description": "S3 이벤트가 Lambda 함수를 트리거"
    }
  ],
  "metadata": {
    "diagram_type": "architecture",
    "region": "us-east-1",
    "description": "이미지 처리 파이프라인 아키텍처"
  }
}
```

#### JSON 필드 설명

**icons 배열:**
- `type`: "aws_service" (고정값)
- `name`: AWS 서비스 이름 (예: "Amazon S3", "AWS Lambda")
- `confidence`: 신뢰도 (0.0~1.0)
- `bbox`: [x1, y1, x2, y2] 좌표 (선택사항)
- `description`: 서비스 설명

**connections 배열:**
- `from`: 출발 서비스명
- `to`: 도착 서비스명
- `type`: 연결 유형
  - `trigger`: 이벤트 트리거
  - `origin`: 오리진 서버
  - `target`: 대상 서비스
  - `data`: 데이터 전송
- `description`: 연결 설명

**metadata 객체:**
- `diagram_type`: 다이어그램 유형
- `region`: AWS 리전
- `description`: 전체 다이어그램 설명

### 4. 추가 컨텍스트 (선택사항)
다이어그램에 대한 추가 설명이나 컨텍스트를 입력합니다.

#### 작성 팁
- **시스템 목적**: 이 아키텍처가 해결하는 문제나 목표
- **주요 구성 요소**: 핵심 서비스와 역할
- **데이터 흐름**: 정보가 어떻게 흘러가는지
- **기술적 특징**: 성능, 확장성, 보안 등
- **비즈니스 컨텍스트**: 사용 사례나 요구사항

#### 예시
```
이 다이어그램은 AWS 서비스를 사용한 이미지 처리 파이프라인을 보여줍니다.

주요 구성 요소:
- 사용자가 이미지를 업로드하면 S3에 저장됩니다
- S3 이벤트가 Lambda 함수를 트리거합니다
- Lambda는 이미지 처리를 수행하고 결과를 다른 S3 버킷에 저장합니다

이 시스템의 목적은 자동화된 이미지 처리 워크플로우를 구현하는 것입니다.

추가 정보:
- 처리 대상: 사용자 업로드 이미지
- 처리 방식: 서버리스 아키텍처
- 확장성: 자동 스케일링 지원
```

### 5. 이미지 해석 실행
"이미지 해석" 버튼을 클릭하여 분석을 시작합니다.

## 📊 결과 해석

### 구조화 JSON
분석 결과가 JSON 형태로 출력됩니다:

```json
{
  "architecture": {
    "services": [
      {
        "name": "Amazon S3",
        "role": "storage",
        "description": "이미지 저장소"
      }
    ],
    "data_flow": [
      {
        "from": "User",
        "to": "S3",
        "description": "이미지 업로드"
      }
    ],
    "patterns": ["serverless", "event-driven"]
  },
  "analysis": {
    "complexity": "medium",
    "scalability": "high",
    "cost_efficiency": "good"
  }
}
```

### 상세 해설
LLM이 생성한 자연어 해설이 제공됩니다:
- 아키텍처 개요
- 각 서비스의 역할
- 데이터 흐름 설명
- 장단점 분석
- 개선 제안

## 🎯 사용 사례

### 1. 아키텍처 리뷰
- 기존 다이어그램 분석
- 설계 패턴 식별
- 개선점 도출

### 2. 문서화
- 기술 문서 작성 지원
- 아키텍처 설명 생성
- 팀 내 공유 자료 제작

### 3. 학습 도구
- AWS 서비스 이해
- 아키텍처 패턴 학습
- 모범 사례 연구

## 💡 최적화 팁

### 이미지 품질
- **고해상도**: 800x600 이상 권장
- **명확한 텍스트**: 작은 글씨는 OCR 인식률 저하
- **대비**: 배경과 텍스트의 명확한 구분

### JSON 입력
- **정확한 서비스명**: AWS 공식 서비스명 사용
- **상세한 설명**: 각 서비스의 역할 명시
- **연결 관계**: 데이터 흐름을 명확히 표현

### 컨텍스트 제공
- **구체적 설명**: 추상적 표현보다 구체적 설명
- **비즈니스 목적**: 기술적 특징과 함께 비즈니스 맥락 포함
- **제약사항**: 성능, 비용, 보안 등 고려사항 언급

## 🐛 문제 해결

### OCR 인식률 저하
- 이미지 해상도 확인
- 텍스트와 배경 대비 개선
- 이미지 회전 보정

### 아이콘 인식 오류
- JSON에서 서비스명 수동 수정
- 신뢰도(confidence) 값 조정
- 추가 컨텍스트로 보완

### 분석 결과 부정확
- 더 상세한 컨텍스트 제공
- JSON 정보 보강
- 이미지 품질 개선

## 📞 지원

문제가 발생하면 다음을 확인하세요:
1. 이미지 형식과 품질
2. JSON 형식의 정확성
3. 컨텍스트 정보의 충분성
4. 시스템 로그 확인

자세한 도움이 필요하면 이슈를 등록해주세요.
